#!/bin/sh

# Check decoding of fstat syscall.

. "${srcdir=.}/init.sh"

# strace -P is implemented using /proc/self/fd
[ -d /proc/self/fd/ ] ||
	framework_skip_ '/proc/self/fd/ is not available'

run_prog > /dev/null
> "$STRACE_TEST_SAMPLE"
run_strace -v -e$NAME -P "$STRACE_TEST_SAMPLE" -a21 $args > "$OUT"
match_diff "$LOG" "$OUT"
rm -f "$OUT"

exit 0
