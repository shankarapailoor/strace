#!/bin/sh

# Check decoding and dumping of read and write syscalls.

. "${srcdir=.}/init.sh"

# strace -P is implemented using /proc/self/fd
[ -d /proc/self/fd/ ] ||
	framework_skip_ '/proc/self/fd/ is not available'

> "$STRACE_TEST_SAMPLE"

run_strace_match_diff \
	-a15 -eread=0 -ewrite=1 -e trace=read,write \
	-P "$STRACE_TEST_SAMPLE" -P /dev/zero -P /dev/null

rm -f -- "$STRACE_TEST_SAMPLE"
